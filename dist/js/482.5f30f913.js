"use strict";(self["webpackChunkexamen_front"]=self["webpackChunkexamen_front"]||[]).push([[482],{482:function(s,o,r){r.r(o),r.d(o,{default:function(){return b}});var a=r(252);const t={class:"login"};function e(s,o,r,e,n,i){const u=(0,a.up)("formulario-ingreso");return(0,a.wg)(),(0,a.iD)("div",t,[(0,a.Wm)(u,{onIngresarUser:i.pasarLogin},null,8,["onIngresarUser"])])}var n=r(963);const i={class:"container"},u={class:"m-4 p-4"},l={class:"row mt-4"},c=(0,a._)("label",null,"Usuario",-1),p={class:"row mt-4"},g=(0,a._)("label",null,"Password",-1),m={class:"row mt-4 col-3 offset-6"},d=(0,a.Uk)("si no eres un usuario "),h=(0,a.Uk)("registrate aqui");function f(s,o,r,t,e,f){const w=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("form",u,[(0,a._)("div",l,[c,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>e.usuario.user=s),class:"from-control col-6 offset-3"},null,512),[[n.nr,e.usuario.user]])]),(0,a._)("div",p,[g,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":o[1]||(o[1]=s=>e.usuario.pass=s),class:"from-control col-6 offset-3"},null,512),[[n.nr,e.usuario.pass]])]),(0,a._)("div",m,[(0,a._)("button",{class:"btn btn-primary",onClick:o[2]||(o[2]=(...s)=>f.ingreso&&f.ingreso(...s))},"Ingresar")])]),(0,a._)("p",null,[d,(0,a.Wm)(w,{to:"/registro"},{default:(0,a.w5)((()=>[h])),_:1})])])}var w={name:"FormularioIngreso",data(){return{usuario:{user:"",pass:""}}},methods:{async ingreso(){try{if(localStorage.mascotas)throw"ya has ingresado";console.log(this.usuario.user,this.usuario.pass);const s=await fetch("https://api-mascotas-jorge.herokuapp.com/api/login",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(this.usuario)});if(200!=s.status)throw localStorage.clear(),"no login";let o=await s.json();localStorage.setItem("mascotas",JSON.stringify(o)),this.resetEstado(),this.$emit("ingresarUser","hola"),this.$router.push("/")}catch(s){console.log(s)}},resetEstado(){this.usuario.user="",this.usuario.pass=""}}},_=r(744);const y=(0,_.Z)(w,[["render",f]]);var v=y,U={name:"LoginView",components:{FormularioIngreso:v},methods:{pasarLogin(){console.log("pasando act user"),this.$emit("ingresarUser")}}};const k=(0,_.Z)(U,[["render",e]]);var b=k}}]);
//# sourceMappingURL=482.5f30f913.js.map